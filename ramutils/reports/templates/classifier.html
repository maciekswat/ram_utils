<div class="plot roc-curve">
  <h2>Classifier Performance</h2>
  <figure>
    <div id="classifier-performance-plot-placeholder"></div>
    <figcaption>
      <b>(Left)</b> ROC curve.<b>(Right)</b> Subject
      recall performance represented as percentage deviation from the (subject)
      mean, separated by tercile of the classifier encoding efficiency estimate
      for each encoded word.
    </figcaption>
  </figure>

  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>Classifier</td>
      {% if stim %}
      <th>Reloaded</td>
      {% endif %}
      <th>AUC</td>
      <th>Permutation P-Value</td>
      <th>Median Classifier Output</th>
    </tr>
    </thead>
    <tbody>
    {% for classifier in classifiers %}
      <tr>
        <td>{{ classifier.metadata['tag'] }}</td>
        {% if stim %}
        <td>{{ classifier.metadata['reloaded'] }}</td>
        {% endif %}
        <td>{{ "{:.3f}".format(classifier.auc) }}</td>
        {% if classifier.pvalue < 0.001 %}
          <td>&lt; 0.001</td>
        {% else %}
          <td>{{ '{:.3f}'.format(classifier.pvalue) }}</td>
        {% endif %}
        <td>{{ "{:.3f}".format(classifier.median_classifier_output) }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  <script>
    window.addEventListener('load', () => {
      let rocData = JSON.parse('{{ plot_data["roc"] }}');
      let tercData = JSON.parse('{{ plot_data["tercile"] }}');
      let tags = JSON.parse('{{ plot_data["tags"] }}');
      ramutils.plots.plotClassifierPerformance(rocData.fpr, rocData.tpr, tercData.low, tercData.mid, tercData.high, tags);
    });
  </script>
</div>
