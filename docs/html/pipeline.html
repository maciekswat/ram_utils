

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pipelines &mdash; Ramutils 2.1.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Ramutils 2.1.3 documentation" href="index.html"/>
        <link rel="next" title="Command-line usage" href="cli.html"/>
        <link rel="prev" title="Event processing" href="events.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Ramutils
          

          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">Serializable data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="classifier.html">Classifier training, cross validation, and utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Event processing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-tasks">Defining tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.classifier">Classifier tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.events">Events tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.misc">Miscellaneous tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.montage">Montage tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.odin">Odin/Ramulator tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.powers">Power computation tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ramutils.tasks.summary">Report summary tasks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous utilities</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ramutils</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Pipelines</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pipeline.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pipelines">
<h1>Pipelines<a class="headerlink" href="#pipelines" title="Permalink to this headline">¶</a></h1>
<p>Experiment configuration file generation and post-experiment reporting is done
via a series of tasks that are built up into a pipeline using <a class="reference external" href="http://dask.pydata.org/en/latest/index.html">dask</a>.</p>
<div class="section" id="defining-tasks">
<h2>Defining tasks<a class="headerlink" href="#defining-tasks" title="Permalink to this headline">¶</a></h2>
<p>Tasks are created by using the <a class="reference internal" href="#ramutils.tasks.task" title="ramutils.tasks.task"><code class="xref py py-func docutils literal"><span class="pre">ramutils.tasks.task()</span></code></a> decorator or wrapping
a function with <a class="reference internal" href="#ramutils.tasks.make_task" title="ramutils.tasks.make_task"><code class="xref py py-func docutils literal"><span class="pre">ramutils.tasks.make_task()</span></code></a>. These simply apply the
<code class="xref py py-func docutils literal"><span class="pre">dask.delayed()</span></code> and (optionally) <code class="docutils literal"><span class="pre">joblib</span></code> caching decorators. The former
is important for adding the ability to parallelize a pipeline (for tasks that
can run independently) while the latter allows for resuming a pipeline when
something goes wrong or if only changing one parameter which does not affect all
tasks.</p>
<dl class="function">
<dt id="ramutils.tasks.task">
<code class="descclassname">ramutils.tasks.</code><code class="descname">task</code><span class="sig-paren">(</span><em>cache=True</em>, <em>log_args=False</em>, <em>nout=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/_wrapper.html#task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to define a task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first last simple">
<li><strong>cache</strong> (<em>bool</em>) – Cache the task result (default: True)</li>
<li><strong>log_args</strong> (<em>bool</em>) – Log arguments the task is called with (default: False)</li>
<li><strong>nout</strong> (<em>int</em>) – Number of return values of the wrapped function. Must be specified if
more than 1.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.make_task">
<code class="descclassname">ramutils.tasks.</code><code class="descname">make_task</code><span class="sig-paren">(</span><em>func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/_wrapper.html#make_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.make_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a function in a task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<em>callable</em>) – Function to wrap</li>
<li><strong>args</strong> – Arguments for the function</li>
<li><strong>kwargs</strong> – Keyword arugments for the function plus keyword arguments accepted by
the <code class="xref py py-func docutils literal"><span class="pre">task()</span></code> decorator.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<p>Common tasks come predefined in the <code class="xref py py-mod docutils literal"><span class="pre">ramutils.tasks</span></code> package and are
documented below.</p>
<div class="section" id="module-ramutils.tasks.classifier">
<span id="classifier-tasks"></span><h3>Classifier tasks<a class="headerlink" href="#module-ramutils.tasks.classifier" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="ramutils.tasks.classifier.perform_cross_validation">
<code class="descclassname">ramutils.tasks.classifier.</code><code class="descname">perform_cross_validation</code><span class="sig-paren">(</span><em>classifier</em>, <em>pow_mat</em>, <em>events</em>, <em>n_permutations</em>, <em>tag='classifier'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/classifier.html#perform_cross_validation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.classifier.perform_cross_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform LOSO or LOLO cross validation on a classifier.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>classifier</strong> (<em>sklearn model object</em>) – </li>
<li><strong>pow_mat</strong> (<em>np.ndarray</em>) – </li>
<li><strong>events</strong> (<em>np.recarray</em>) – </li>
<li><strong>n_permutations</strong> (<em>int</em>) – </li>
<li><strong>tag</strong> (<em>str</em>) – Tag to assign the resulting classifier summary (default:
<code class="docutils literal"><span class="pre">'classifier'</span></code>)</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Extra keyword arguments that are passed to get_sample_weights. See
that function for more details</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>classifier_summary</strong> – Results of cross validation as a summary object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="data.html#ramutils.reports.summary.ClassifierSummary" title="ramutils.reports.summary.ClassifierSummary">ClassifierSummary</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.classifier.serialize_classifier">
<code class="descclassname">ramutils.tasks.classifier.</code><code class="descname">serialize_classifier</code><span class="sig-paren">(</span><em>classifier</em>, <em>pairs</em>, <em>features</em>, <em>events</em>, <em>sample_weights</em>, <em>classifier_summary</em>, <em>subject</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/classifier.html#serialize_classifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.classifier.serialize_classifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize classifier into a container object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>classifier</strong> (<em>sklearn Estimator</em>) – Model used during training</li>
<li><strong>pairs</strong> (<em>array_like</em>) – bipolar pairs used for training</li>
<li><strong>features</strong> (<em>np.ndarray</em>) – Normalized power matrix used as features to the classifier</li>
<li><strong>events</strong> (<em>np.recarray</em>) – Set of events used for training</li>
<li><strong>sample_weights</strong> (<em>array_like</em>) – Weights used for each of the event</li>
<li><strong>classifier_summary</strong> (<a class="reference internal" href="data.html#ramutils.reports.summary.ClassifierSummary" title="ramutils.reports.summary.ClassifierSummary"><em>ClassifierSummary</em></a>) – Object used for calculating and storing cross-validation-related metrics</li>
<li><strong>subject</strong> (<em>str</em>) – Subject identifier</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Object representing all meta-data associated with training a classifier</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ClassififerContainer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.classifier.post_hoc_classifier_evaluation">
<code class="descclassname">ramutils.tasks.classifier.</code><code class="descname">post_hoc_classifier_evaluation</code><span class="sig-paren">(</span><em>events</em>, <em>powers</em>, <em>post_stim_events</em>, <em>post_stim_powers</em>, <em>all_pairs</em>, <em>classifiers</em>, <em>n_permutations</em>, <em>retrained_classifier</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/classifier.html#post_hoc_classifier_evaluation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.classifier.post_hoc_classifier_evaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate a trained classifier</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>events</strong> (<em>np.recarray</em>) – Task events associated with the stim sessesion to be evaluated</li>
<li><strong>powers</strong> (<em>np.ndarray</em>) – Normalized mean powers</li>
<li><strong>post_stim_events</strong> (<em>np.recarray</em>) – Post-stimulation events associated with the stim sessesion to be
evaluated</li>
<li><strong>post_stim_powers</strong> (<em>np.ndarray</em>) – Normalized mean powers for post_stim period events</li>
<li><strong>all_pairs</strong> (<em>OrderedDict</em>) – All pairs based on recorded electrodes combine from config file</li>
<li><strong>classifiers</strong> (<em>List</em>) – List of classifiers corresponding to each session</li>
<li><strong>n_permutations</strong> (<em>int</em>) – Number of permutations to use for cross validation</li>
<li><strong>retrained_classifier</strong> (<em>classiflib.container.ClassifierContainer</em>) – classifier container object based on a retrained classifier</li>
<li><strong>kwargs</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>A dictionary of summary objects that are needed in subsequent parts
of the processing pipeline. The dictionary will be in the following
format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;cross_session_summary&#39;</span><span class="p">:</span> <span class="n">MultiSessionClassifierSummary</span><span class="p">,</span>
    <span class="s1">&#39;classifier_summaries&#39;</span><span class="p">:</span> <span class="n">List</span> <span class="n">of</span> <span class="n">ClassifierSummary</span> <span class="n">objects</span><span class="p">,</span>
    <span class="s1">&#39;encoding_classifier_summaries&#39;</span><span class="p">:</span> <span class="n">List</span> <span class="n">of</span> <span class="n">ClassifierSummary</span>
    <span class="n">objects</span> <span class="n">built</span> <span class="n">using</span> <span class="nb">all</span> <span class="n">encoding</span> <span class="n">events</span><span class="p">,</span>
    <span class="s1">&#39;post_stim_predicted_probs&#39;</span><span class="p">:</span> <span class="n">Classifier</span> <span class="n">output</span> <span class="n">during</span> <span class="n">post</span> <span class="n">stim</span> <span class="n">period</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Different channels could be excluded based on results of artifact detection
and stim parameters. Extract the used pairs from the serialized classifier
that was used/retrained in order to correctly assess the classifier. The
default behavior is to use the retrained classifier for any sessions
where the actual classifier was not found or was unable to be loaded.
Legacy-formatted classifiers are not supported for re-loading. In cases
where a stim session was restarted, the default behavior is to use the
original classifier (i.e. the classifier before artifact detection) rather
than trying to guess which classifier to load.</p>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.classifier.reload_used_classifiers">
<code class="descclassname">ramutils.tasks.classifier.</code><code class="descname">reload_used_classifiers</code><span class="sig-paren">(</span><em>subject</em>, <em>experiment</em>, <em>events</em>, <em>root</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/classifier.html#reload_used_classifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.classifier.reload_used_classifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload the actual classifiers used in each session of an experiment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject</strong> (<em>str</em>) – Subject identifier</li>
<li><strong>experiment</strong> (<em>str</em>) – Name of the experiment</li>
<li><strong>sessions</strong> (<em>list</em>) – List of sessions to try reloading a classifier</li>
<li><strong>root</strong> (<em>str</em>) – Base path of where to find RHINO files</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">List of ClassifierContainer objects of length n_sessions</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If a classifier is not found or is unable to be reloaded (legacy storage
format, or other issues), then the list of ClassifierContainer objects
will have None as the entry for that session.</p>
</dd></dl>

</div>
<div class="section" id="module-ramutils.tasks.events">
<span id="events-tasks"></span><h3>Events tasks<a class="headerlink" href="#module-ramutils.tasks.events" title="Permalink to this headline">¶</a></h3>
<p>Partial pipelines for processing events that is used by full pipelines.</p>
<dl class="function">
<dt id="ramutils.tasks.events.build_test_data">
<code class="descclassname">ramutils.tasks.events.</code><code class="descname">build_test_data</code><span class="sig-paren">(</span><em>subject</em>, <em>experiment</em>, <em>paths</em>, <em>joint_report</em>, <em>sessions=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/events.html#build_test_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.events.build_test_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the set of events to be used for post-hoc classifier
evaluation, i.e. the test data</p>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.events.build_training_data">
<code class="descclassname">ramutils.tasks.events.</code><code class="descname">build_training_data</code><span class="sig-paren">(</span><em>subject</em>, <em>experiment</em>, <em>paths</em>, <em>sessions=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/events.html#build_training_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.events.build_training_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the set of events needed for classifier training</p>
</dd></dl>

</div>
<div class="section" id="module-ramutils.tasks.misc">
<span id="miscellaneous-tasks"></span><h3>Miscellaneous tasks<a class="headerlink" href="#module-ramutils.tasks.misc" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="ramutils.tasks.misc.read_index">
<code class="descclassname">ramutils.tasks.misc.</code><code class="descname">read_index</code><span class="sig-paren">(</span><em>mount_point='/'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/misc.html#read_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.misc.read_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the JSON index reader.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mount_point</strong> (<em>str</em>) – Root directory to search for.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">JsonIndexReader</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ramutils.tasks.montage">
<span id="montage-tasks"></span><h3>Montage tasks<a class="headerlink" href="#module-ramutils.tasks.montage" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="module-ramutils.tasks.odin">
<span id="odin-ramulator-tasks"></span><h3>Odin/Ramulator tasks<a class="headerlink" href="#module-ramutils.tasks.odin" title="Permalink to this headline">¶</a></h3>
<p>Tasks specific to the Medtronic Odin ENS.</p>
<dl class="function">
<dt id="ramutils.tasks.odin.generate_electrode_config">
<code class="descclassname">ramutils.tasks.odin.</code><code class="descname">generate_electrode_config</code><span class="sig-paren">(</span><em>subject</em>, <em>paths</em>, <em>anodes=None</em>, <em>cathodes=None</em>, <em>localization=0</em>, <em>montage=0</em>, <em>default_surface_area=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/odin.html#generate_electrode_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.odin.generate_electrode_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate electrode configuration files (CSV and binary).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject</strong> (<em>str</em>) – Subjebct ID</li>
<li><strong>paths</strong> (<a class="reference internal" href="data.html#ramutils.parameters.FilePaths" title="ramutils.parameters.FilePaths"><em>FilePaths</em></a>) – </li>
<li><strong>anodes</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of stim anode labels.</li>
<li><strong>cathodes</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of stim cathode labels.</li>
<li><strong>localization</strong> (<em>int</em>) – Localization number (default: 0)</li>
<li><strong>montage</strong> (<em>int</em>) – Montage number (default: 0)</li>
<li><strong>default_surface_area</strong> (<em>float</em>) – Default surface area to set all electrodes to in mm^2. Only used if no
area file can be found.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>paths</strong> – Updated <code class="xref py py-class docutils literal"><span class="pre">FilePaths</span></code> object with path to the electrode config file
defined.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="data.html#ramutils.parameters.FilePaths" title="ramutils.parameters.FilePaths">FilePaths</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>At present, this will only allow for generating hardware-bipolar electrode
config files.</p>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.odin.generate_ramulator_config">
<code class="descclassname">ramutils.tasks.odin.</code><code class="descname">generate_ramulator_config</code><span class="sig-paren">(</span><em>subject</em>, <em>experiment</em>, <em>container</em>, <em>stim_params</em>, <em>paths</em>, <em>pairs=None</em>, <em>excluded_pairs=None</em>, <em>exp_params=None</em>, <em>extended_blanking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/odin.html#generate_ramulator_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.odin.generate_ramulator_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create configuration files for Ramulator.</p>
<p>In hardware bipolar mode, the neurorad pipeline generates a <code class="docutils literal"><span class="pre">pairs.json</span></code>
file that differs from the electrode configured pairs. It is up to the user
of the pipeline to ensure that the path to the correct <code class="docutils literal"><span class="pre">pairs.json</span></code> is
supplied (although Ramulator does not use it in this case).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject</strong> (<em>str</em>) – </li>
<li><strong>experiment</strong> (<em>str</em>) – </li>
<li><strong>container</strong> (<em>ClassifierContainer</em><em> or </em><em>None</em>) – serialized classifier</li>
<li><strong>stim_params</strong> (<em>List</em><em>[</em><a class="reference internal" href="data.html#ramutils.parameters.StimParameters" title="ramutils.parameters.StimParameters"><em>StimParameters</em></a><em>]</em>) – list of stimulation parameters</li>
<li><strong>paths</strong> (<a class="reference internal" href="data.html#ramutils.parameters.FilePaths" title="ramutils.parameters.FilePaths"><em>FilePaths</em></a>) – </li>
<li><strong>excluded_pairs</strong> (<em>dict</em>) – Pairs excluded from the classifier (pairs that contain a stim contact
and possibly some others)</li>
<li><strong>exp_params</strong> (<a class="reference internal" href="data.html#ramutils.parameters.ExperimentParameters" title="ramutils.parameters.ExperimentParameters"><em>ExperimentParameters</em></a>) – All parameters used in training the classifier. This is partially
redundant with some data stored in the <code class="docutils literal"><span class="pre">container</span></code> object.</li>
<li><strong>extended_blanking</strong> (<em>bool</em>) – Whether or not to enable the ENS extended blanking (default: True).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>zip_path</strong> – Path to generated configuration zip file</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ramutils.tasks.powers">
<span id="power-computation-tasks"></span><h3>Power computation tasks<a class="headerlink" href="#module-ramutils.tasks.powers" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="module-ramutils.tasks.summary">
<span id="report-summary-tasks"></span><h3>Report summary tasks<a class="headerlink" href="#module-ramutils.tasks.summary" title="Permalink to this headline">¶</a></h3>
<p>Tasks related to summarizing an experiment. Used primarily in reporting
results.</p>
<dl class="function">
<dt id="ramutils.tasks.summary.summarize_nonstim_sessions">
<code class="descclassname">ramutils.tasks.summary.</code><code class="descname">summarize_nonstim_sessions</code><span class="sig-paren">(</span><em>all_events</em>, <em>task_events</em>, <em>bipolar_pairs</em>, <em>excluded_pairs</em>, <em>normalized_powers</em>, <em>joint=False</em>, <em>repetition_ratio_dict={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/summary.html#summarize_nonstim_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.summary.summarize_nonstim_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a summary by unique session/experiment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_events</strong> (<em>np.recarray</em>) – Full set of events</li>
<li><strong>task_events</strong> (<em>np.recarray</em>) – Event subset used for classifier training</li>
<li><strong>joint</strong> (<em>Bool</em>) – Indicator for if a joint report is being created. This will disable
checks for single-experiment events</li>
<li><strong>repetition_ratio_dict</strong> (<em>Dict</em>) – Mapping between subject ID and repetition ratio data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>summary</strong> – List of SessionSummary objects for the proper experiment type.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">list</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">TooManyExperimentsError</span></code> – If the events span more than one session.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The experiment type is inferred from the events.</p>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.summary.summarize_math">
<code class="descclassname">ramutils.tasks.summary.</code><code class="descname">summarize_math</code><span class="sig-paren">(</span><em>events</em>, <em>joint=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/summary.html#summarize_math"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.summary.summarize_math" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a summary math event summary of a single experiment session</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>events</strong> (<em>np.recarray</em>) – Events from single experiment session</li>
<li><strong>joint</strong> (<em>Bool</em>) – Indicates if the given events are part of a joint event, and therefore
multiple experiments should be allowed</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>summary</strong> – List of MathSummary objects</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.summary.summarize_stim_sessions">
<code class="descclassname">ramutils.tasks.summary.</code><code class="descname">summarize_stim_sessions</code><span class="sig-paren">(</span><em>all_events</em>, <em>task_events</em>, <em>stim_params</em>, <em>pairs_data</em>, <em>bipolar_pairs</em>, <em>excluded_pairs</em>, <em>normalized_powers</em>, <em>encoding_classifier_summaries=None</em>, <em>post_stim_predicted_probs=None</em>, <em>trigger_output=None</em>, <em>post_stim_trigger_output=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/summary.html#summarize_stim_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.summary.summarize_stim_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct stim session summaries</p>
</dd></dl>

<dl class="function">
<dt id="ramutils.tasks.summary.summarize_ps_sessions">
<code class="descclassname">ramutils.tasks.summary.</code><code class="descname">summarize_ps_sessions</code><span class="sig-paren">(</span><em>ps_events</em>, <em>bipolar_pairs</em>, <em>excluded_pairs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ramutils/tasks/summary.html#summarize_ps_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ramutils.tasks.summary.summarize_ps_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Task for generating summaries of PS session</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ps_events</strong> (<em>np.recarray</em>) – </li>
<li><strong>bipolar_pairs</strong> (<em>dict</em>) – </li>
<li><strong>excluded_pairs</strong> (<em>dict</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="Command-line usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="events.html" class="btn btn-neutral" title="Event processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>